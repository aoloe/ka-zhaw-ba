\chapter{Vorgehen}
 
Das Ziel ist die Entwicklung eines Prototypen aus dem bestehenden Modell der Projektarbeit von \cite{PA_bicycle}. Die Vorgehensschritte sind in der untenstehenden Auflistung abgebildet. Sie bilden die Struktur dieses Kapitels. Die Definition der konkreten Schritte geschah in Absprache mit Prof. Dr. M. Meli und dem Resarch Assitenten Dario Dünar vom Instiut of Embedded Systems (InES). Auf der CD finden sich die Sitzungsprotokolle über den aktuellen Entwicklungsstand, die offenen Fragen und die Entscheidungen.

%\begin{enumerate}
%  \item Inbetriebnahme Machbarkeitsstudie 
      % Ergebnis: 
      % LTs entladen, C_in falsch, kein fixes T, 10 km/h
%  
%  \item Hardware entwickeln
      % Welche Probleme sollen mit HW weg: 
%      % - C_in falsch
%      % - 10 km/h
      % Schema, Bauteildef mit Optimierung, Layout  
%  
%  \item Inbetriebnahme Prototyp
      % (Testen weg)  Energiemessung und Optimierung, weil zu wenig.    
%      % 2 Magnete, Reellight, besser Spule
%      
%  \item  Energie- und Powermanagement
%      % Welche Probleme sollen weg: 
      % - LTS entladen
%      % - kein fixes T
        % 1 Messungen Sensortag  (geht auch zu Manu)
        % 2 Kalkulatin (mit Ziel LTS entladen und 10 km/h)
        % 3 Einstellungen Chip mit Ziel LTS, 10 km/ mit  MPP
        % 4 Aufgrund von Messungen -> Codeoptimierung

%  \item Entwickeln einer BLE-Applikation
%        % Aubau der App, 
        % BLE Empfangen/Filtern,  
        % Settings,  
%        % Tacho
% \end{enumerate}  

Die sprachliche Unterscheidung von Energy - und Power Management entspricht der Unterscheidung zweier \glqq Management-Teilen\grqq im Prototypen: Das Endprodukt regelt an zwei Stellen auf unterschiedliche Art die zur Verfügung stehende Energie. Der Begriff Energy Management wird in dieser Arbeit für das Sammeln und Weiterleiten von Energie über eine Hardwareimplementation gebraucht. Der Begriff Power Managment wird für die Softwareimplementation gebraucht. Diese regelt, dass die zur Verfügung gestellte Energie nicht sofort verbraucht wird. Die sprachliche Trennung ist künstlich, denn in der Umsetzung spielen Hard- und Softwareregelung Hand in Hand. Die sprachliche Unterscheidung dient der Lesbarkeit und bezeichnet keinen physikalischen Unterschied.
 
 
 
 %------------------------------------------------------------------------------
 % 1---------------------------------------------------------------------------
 %------------------------------------------------------------------------------
 
 
 
 
\section{Inbetriebnahme Machbarkeitsstudie}\label{v_inbetriebnahme} 
      % Ergebnis: 
      % LTs entladen, C_in falsch, kein fixes T, 10 km/h
      
Ziel der Inbetriebnahme des Aufbaus der vorangehenden Arbeit \cite{PA_bicycle} ist es, zu definieren, welche Funktionalitäten verbessert werden sollen. Diese Liste ist für die Hardwareimplementation und als Fokus für das Energy und Power Management wichtig. Zur Orientierung werden im ersten Unterkapitel die Funktionsblöcke und deren Aufgaben festgehalten. Danach werden die Energiepegel der einzelnen Blöcke in Unterkapitel ausgemessen und das Verhalten beurteilt. Aus der Analyse der Messdaten entsteht die in Unterkapitel 3 aufgelistete Optimierungsliste. Als letztes folgt eine kurze Vertiefung in das auffällige Verhalten des Eingangssignals. Dieser Exkurs hat Ursache in der Begegnung mit  Ives \todo{Familienname} von MicroElectronics Marin AG. Er entwickelte den in dieser Arbeit verwendete EM8500-Chip massgeblich mit und wies uns auf den auffälligen Signalverlauf des Harvester-Eingangssingals hin. Dieses Signal wurde deshalb bei der Inbetriebnahme speziell getestet, was im letzten Unterkapitel dokumentiert ist.
      
\subsection{Funktionsblöcke}

Der Bicycle Computer besteht aus vier Funktionsblöcken: 1) Einem Harvesterteil: in dem die Energie geerntet wird, 2) einem Energy Managment-Teil: in dem die Energie gesammelt und kontrolliert weitergeleitet wird, 3) einem Power Mangement-Teil: in dem die Energie , durch das Auslesen von Sensordaten, verarbeitet wird und aus 4) einer mobilen Applikation, die die Daten anzeigt. Die Abbildung \ref{funktionsdiagramm_bild} zeigt die Abfolge der Energiegewinnung bis zum Verbrauch in der Applikation. Die Abbildung zeigt auch, mit welchen Mitteln die Aufgaben bewerkstelligt werden. Der Harvesterschaltung folgt ein Gleichrichter und Kondensator zur Glättung der Wechselspannung. Das Energy Management basiert vor allem auf dem Chip EM8500 und den angeschlossenen zwei Kondensatoren als Speicherelementen. Die gesammelte Energie wird im Sensortag, einem Board mit 2 Prozessoren und 10 Sensoren für das Auslesen und Senden der der Sensordaten benötigt. Endkunde ist eine externe Applikation, die die Daten empfängt.

%\begin{figure}[ht]
%   \includegraphics[scale=1]{3Vorgehen/imag/Blockdiagramm.png}\label{funktionsdiagramm_bild} 
%   \caption{Funktionsblöcke Bicycle Computer}
%\end{figure}

In die Funktionsblöcke sind die vier wichtigsten Spannungsbezeichnungen eingebaut. Da diese bei der Inbetriebnahme für den Verlauf der Energiezustände wichtig sind. Ebenso ist der Ausgangskondensator nach der Havesterschaltung explizit gezeichnet, da dieser im Verlauf der Entwicklung wichtig wird. % Zur Benennung der Spannung ist vermerkt, dass sie, je nachdem von welchem Funktionsblock man die Signalbezeichnung nimmt, unterschiedlich heissen. So wird z.B. 

%\begin{tabbing}
%    Bezeichnung \quad\= Beschreibung\\[0.8ex]
%    VHRV \> Ausgangspannung Harvesterquelle, Eingangsspannung Energy Management\\
%    VSTS\> Spannung am STS--Kondensator (Primärspeicher)\\
%    VLTS\> Spannung am LTS--Kondensator (Sekundärspeicher)\\
%    VSUP\> Ausgangsspannung Energy Managment, Eingangsspannung Sensortag\\
%\end{tabbing}   
 

\subsection{Verhalten des Vorgängermodells}

Die Abbildung \ref{spannungMachbarkeit} zeigt den zeitlichen Verlauf der Energiestände unterschiedlicher Komponenten des Vorgängermodells. Kanal 1 (gelb) stellt die geerntete Energie des Harvesters dar. Diese Energie wird 

%\begin{figure}[ht]
%    \includegraphics[width=0.5\textwidth]{3Vorgehen/imag/messungPA.png}
%    \caption{Spannungswerte Modell der Machbarkeitsstudie}\label{spannungMachbarkeit} 
%\end{figure}
%
%Legende zu Abbildung \ref{spannungMachbarkeit}
%\begin{tabbing}
%    Channel\quad\= Farbe\quad\= Beschreibung\\[0.8ex]
%    CH1\> gelb\> Spannung von Harvesterquelle\\
%    CH2\> blau\> Spannung am STS--Kondensator\\
%    CH3\> violet\> Spannung am LTS--Kondensator\\
%    CH4\> grün\> Ausgangsspannung Energiemanagment\\
%\end{tabbing}    

Die Energieregelung des Vorgängermodells basiert auf einem hohen Schwellwert von 3.6 V beim Primärspeicher (STS), damit genug Energie für das versenden eines BLE-Pakets entsteht (siehe Abbildung \ref{spannungMachbarkeit}). Mit einer Speicherkapazität von 470 $\mu$F beträgt, braucht es rund 25 s, bis dass der Speicher den Schwellwert erreicht.  


\subsection{Erste Optimierungsliste}

%Für das Weiterentwickeln des Vorgängermodells fielen folgende zwei Punkte auf:
%\begin{itemize}
%     \item Der Verlauf des Harvester-Eingangs wechselt abrupt.  
%     \item Für das Laden des Primärspeichers von 470 $\mu$F in 25 s benötigt es eine Geschwindigkeit von mehr als 60 km/h. 
%\end{itemize} 
%
%Bei der Verwendung der gesammelten Energie ergab die Inbetriebnahme zwei Verbesserungsvorschläge:
%
%\begin{itemize}
%     
%     \item Das zweite Speicherelement entlädt sich nicht. Dadurch kann seine Energie nicht
%     \item Die Energie wird statisch nach einem fixen Zeitintervall von 10 s genutzt. Das Zeitintervall soll der Geschwindigkeit angepasst werden.  verwendet werden.
%\end{itemize} 
%



\subsection{Harvester-Schaltung}

In der Machbarkeitsstudie ist nach dem Gleichrichter ein Kondensator von 470 $\mu$F nachgeschaltet. Dieser glättet die Spannungspulse nach dem Gleichrichter zu einer DC-ähnlichen Spannung mit Rippeln.

Mit einem Kondensator von 470 $\mu$F wird die Ausgangsspannung der Harvesterspannung fast rippelfrei. Die Rippelspannung beträgt 3.2 mV (siehe Abbildung \ref{kond470uF}).

\begin{figure}
    \includegraphics[width=15cm]{3Vorgehen/imag/470uF.PNG}
    \caption{Rippelspannung bei Glättung mit 470 $\mu$F Kondensator}\label{kond470uF} 
\end{figure}

Gemäss Ives \textbf{XXXXXX} von EM Microelectronics sollten Kondensatoren der Harvesterschaltung im Bereich von 4.7 $\mu$F liegen, sodass die Energiemanagementschaltung ordnungsgemäss funktioniert.  

Aus diesem Grund wird die Rippelspannung am Ausgangs der Harvesterschaltung mit kleineren Kondensatoren gemessen. Das Messprotokoll befindet sich im Anhang.

\subsubsection*{Messaufbau}
In der gegebenen Harvesterschaltung wird am Kondensator die Spannung mit einem Kathodenstrahloszilloskop (KO) gemesssen. Ausgehend vom bestehenden Kondensator (470 $ \mu $F), werden danach Elektrolytkondensatoren (Elko) mit den Werten 100 $\mu F $F, 47 $\mu$F und 10 $\mu$F gemessen.

\begin{figure}[h]
    \includegraphics[width=15cm]{3Vorgehen/imag/messschaltungHarvesterschaltung.jpg}
    \caption{Messschaltung}
\end{figure}

\subsubsection*{Resultat}

Die Rippelspannung erhöht sich wie erwartet. Vpp beträgt bei 100 uF \textbf{xx} mV, bei 47 uF 28.8 mV (siehe Abbildung \ref{kond47uF}) und bei 10 uF 320 mV (Abbildung \ref{kond10uF}).
 
\begin{figure}
    \includegraphics[width=15cm]{3Vorgehen/imag/10uF.PNG}
    \caption{Rippelspannung mit 10 uF Kondensator}\label{kond10uF} 
\end{figure}

\begin{figure}
    \includegraphics[width=15cm]{3Vorgehen/imag/47uF.PNG}
    \caption{Rippelspannung mit 47 uFKondensator}\label{kond47uF} 
\end{figure}

Nach Rücksprache mit einem Entwickler des EM8500-Chips wird der zu hohe Kondensator vor dem Harvester-Eingang als Ursache vermutet. Laut Datenblatt sollte dieser 4.7 $\mu$F, damit der Booster mit eingebautem MPPT ideal regeln kann.


Aus den Beobachtungen ergaben sich folgende Aufgaben für die Entwicklung des Prototypen:

\begin{enumerate}
    \item Die Harvesterschaltung funktioniert nicht optimal. Die Auswirkung des zu hohen Kondensator vor Harvestereingang soll getestet werden
    \item Die Schaltung soll für eine Geschwindigkeit von 10 km/h ausgelegt werden
    \item Die Konfigurationen beim EM8500 sollen überarbeitet werden, sodass LTS genutzt wird
    \item Das Senden der Pakte soll der Geschwindigkeit angepasst werden
\end{enumerate}

Punkte 1 und 2 haben Auswirkung auf das Layout, Punkte 3 und 4 auf die 





%------------------------------------------------------------------------------
% 2---------------------------------------------------------------------------
%------------------------------------------------------------------------------



\section{Hardware entwickeln}
% (Welche Probleme sollen mit HW weg: Schema entwickeln, Bauteildef
%                               mit Optimeirung, Layout)  
                               
Ein wichtiger Punkt der Arbeit ist die Miniaturisierung der bestehenden Hardware, das heisst der Aufbau aus der Machbarkeitsstudie soll auf eine Leiterplatte gebracht werden. Die Leiterplatte hat einige Vorgaben, welche im besten Fall alle eingehalten werden sollen.

\begin{enumerate}
    \item Die Leiterplatte soll nicht oder nur geringfügig grösser sein als das TI-SensorTag.
    
    \item Alle Netze sollen mit Testpunkten ausgestattet werden.
    
    \item Alle Anschlüsse vom TI-SensorTag sollen auf der Leiterplatte mit Testpunkten ausgestattet werden.
    
    \item Alle Testpunkte vom TI-SensorTag sollen in einem Raster von 2.54 mm angeordnet werden, damit ein Stecker kontaktiert werden kann.
    
\end{enumerate}
	


\subsection{Das Schema (oder der Stromlaufplan)}
Als erstes musste ein Schema, auch Stromlaufplan genannt, gezeichnet werden. Das Schema wurde Blockweise erfasst, als erstes wurde die Harvesterschaltung erfasst. Das Schema wurde aus der Machbarkeitsstudie entnommen. Die Funktionsweise der Harvesterschaltung kann wieder in mehrere Teile unterteilt werden.

\begin{enumerate}
    \item Die Spule: Gewinnt Energie aus dem vorbei schnellenden Magneten.
    
    \item Der Gleichrichter: Erzeugt positive Pulse aus der induzierten Spannung.
    
    \item Der Limiter: Limitiert die Spannung auf eine fixe Spannung.
    
    \item Der Ausgangskondensator: Glättet die positiven Pulse aus dem Gleichrichter.
    
\end{enumerate}

Der nächste Block ist der EM8500-Chip mit seinen Stützkondensatoren. Das Schema wurde aus dem Datenblatt entnommen. 
Die Energiespeicher, welche in dieser Arbeit mittels Elektrolytkondensatoren dargestellt werden, sind einige der wichtigsten Elemente. Die Speicherelemente werden nicht auf der Leiterplatte Platz finden, da die meisten Elektrolytkondensatoren zu hoch sind und der Platz zwischen den Leiterplatten sehr gering ist. 
Die Umlauferfassung wird mit einem Reed-Switch ermöglicht. Der Reedswitch ist einer der kleinsten Blöcke im Schema.
Der Block Interface enthält die Verbindung zum TI-SensorTag, ein Stecker realisiert dieses Interface. Der Stecker ist bereits vom TI-SensorTag vorgegeben, es handelt sich um einen Stecker, welcher sein eigenes Gegenstück darstellt. 

\subsection{Optimierung der Harvesterschaltung}

% Zwei Gründe:
%- Ives: Der Glättungskondensator wird auf 47 uF geändert. 
%- Zu wenig Energie für 10 km/h

Nach dem Erfassen des Schemas wurde die Optimierung der Hardware angegangen. Die beste Optimierungsmöglichkeit und auch der kritischste Block ist die Harvesterschaltung, hier wird die Energie für die restliche Schaltung gewonnen. In mehreren Schritten wurden die einzelnen Teile der Schaltung analysiert und versucht zu optimieren.

\subsubsection{Optimierung der Spule}

Die Spule gewinnt die Energie aus dem vorbei schnellenden Magneten, hier kann die gewonnene Energie beeinflusst werden. Eine gute Spule kann mehr Energie aus dem bewegten Magneten gewinnen, wichtig ist die Induktivität L und die Fläche A, welche die Spule hat. Eine Vorgabe war dass die Spule von der Grösse nicht merklich verändert wird, ausser man würde eine kleinere Spule finden, welche mehr Energie gewinnt. Eine Spule mit ähnlicher Fläche bzw. Grösse wurde gefunden, welche eine höhere Induktivität besitzt. Die Spule von Würth Elektronik ist sehr vielversprechend, denn die gleiche Fläche mit höherer Induktivität bedeutet mehr Energiegewinn aus dem Magneten.
\todo{Hier Schlusswort von Messprotokoll einfügen}.

\subsubsection{Optimierung des Gleichrichters}

Der Gleichrichter aus dem Aufbau der Machbarkeitsstudie besteht aus vier Dioden vom Typ 1N5819, diese Dioden sind nicht für eine LowPower-Anwendung ausgelegt. Ausserdem könnte ein Gleichrichter gefunden werden, welcher in einem Gehäuse ausgeliefert wird. Wichtig ist dass der Leckstrom so gering wie möglich ist und die Schwellenspannung ebenfalls möglichst klein bleibt. 
\todo{Hier Schlusswort von Messprotokoll einfügen}.

\subsubsection{Optimierung des Limiter}

Der Limiter ist eine Spannungbegrenzung, da die nachfolgende Schaltung nicht mit einer zu hohen Spannung betrieben werden darf. Dieser Schaltungsteil ist sehr kritisch, denn er darf nicht zu viel Energie verlieren, muss aber trotzdem die Spannung immer begrenzen. Die Spannung darf einen Pegel von 2 V nicht überschreiten, da ansonsten der EM-8500-Chip droht zerstört zu werden. 
\todo{Hier Schlusswort von Messprotokoll einfügen}.

\subsubsection{Optimierung des Ausgangskondensators}

Der Ausgangskondensator muss möglichst niedrig gehalten werden, gemäss Aussage von Yves, da ansonsten der EM8500-Chip Mühe hat den Eingang zu regeln. Trotzdem darf der Ausgangskondensator nicht zu klein dimensioniert werden, da ansonsten die Rippelspannung am Ausgang der Harvestersschaltung zu hoch ist und der EM8500-Chip ebenfalls nicht mehr richtig regeln kann.
\todo{Hier Schlusswort von Messprotokoll einfügen}.


\subsection{Bauteildefinition}

Nachdem das Schema gezeichnet wurde und die Schaltung opimiert wurde, mussten die Bauteile noch definiert werden. Es mussten die Footprints, sowie die Hersteller, Herstellerbezeichnungen, Lieferant und Lieferantenartikelnummer hinterlegt werden. Einige Footprints waren bereits in den Bibliotheken vorhanden, welche wir von Lukas erhalten haben. Fehlende Footprints wurden ergänzt, wie zum Beispiel der Footprint der Spule.


\subsection{Das Layout}

\subsubsection{Positionierung}
Die Positionierung der Bauteile auf der Leiterplatte ist sehr wichtig, da hier schon unnötige Leiterbahnen gespart werden können bzw. die Länge von gewissen Leiterbahnen können extrem verkürzt werden.
Wichtig ist, dass die Stüztkondensatoren bei dem EM8500-Chip so nah wie möglich am Chip platziert werden, damit die Spannungen am Chip so konstant gehalten werden können, wie nur möglich.
Weiter sollte die Harvesterschaltung ebenfalls sehr eng beieinander platziert werden, um zu verhindern, dass durch lange Stromlaufwege bereits Leistung verloren geht. Problematisch ist, dass die Spule auf der unteren Seite der Leiterplatte platziert werden muss, somit wird die Schaltung ein auf zwei Layer aufgeteilt.
Eine grosse Herausforderung ist die Positionierung der Testpunkte, um das Interface zum TI-SensorTag zu realisieren. Dadurch wird ein grosser Platz für die korrekte Positionierung der Testpunkte eingenommen.

\subsubsection{Gestaltung der Leiterbahnen}

Wann immer möglich wurden die Leiterbahnen, welche zu der Harvesterschaltung gehören, mit 20 Mil gezogen, um eine möglichst verlustfreie Leistungsübertragung zu gewährleisten. Alle anderen nicht leistungskritischen Leiterbahnen wurden mit eine Leiterbahnbreite von 10 Mil platziert, um nicht mehr Platz in Anspruch zu nehmen als nötig.

\subsubsection{Ergebnis}

Das Ergebnis ist eine Leiterplatte, welche alle gewünschten Spezifikationen erfüllt und somit kann die Leiterplatte auch für ein Praktikum verwendet werden. Die Leiterplatte ist mit sehr vielen Testpunkten ausgestattet, sowie die Möglichkeit für Strommessungen.
\todo{Bild Neues Layout}.

% 4----------------------------------------------------------
\section{Inbetriebnahme des Prototypen}

Der entwickelte Prototyp wurde intensiv ausgemessen (siehe Messprotokolle XXXX.)  Es werden 3 Messstellen unterschieden siehe Abbildung \ref{EnergieMessungStellen}. In den folgenden Unterkapiteln werden die Resultate und die darauf folgenden Entwicklungsschritte kurz beschrieben:

\begin{figure}
  \includegraphics[width=1.0\textwidth]{3Vorgehen/imag/EnergiemessungStellen.png}\label{EnergieMessungStellen} 
  \caption{Messstellen am Prototypen}
\end{figure}

\subsection{Testen der Harvesterschaltung}

- Zu wenig Energie
- Zwei Magnete
- stärkere Spule

\subsection{Ausmessen der Energie vor und nach dem Gleichrichter}


\subsection{Energiemessungen nach dem EMBoard}



% 5---------------------------------------------------------------------------
\section{Energy Management}

Aufgabe des Energy Managements ist es, 

\subsection{Energiemessungen Sensortag}



\subsection{Energiekalkulation}
\todo{nach Donnerstag Abend}
%EHRV gesammelt >= BLESenden
%Zeitkomponente
%Energie Harvester braucht länger, verbrauch schneller.

Die Energie der Quelle [$\bar{E_{HRV}} $] muss ausreichen für das Versenden der Datenpakte über Bluetooth smart [$\bar{E_{BLE}}$].

\[\bar{E_{HRV}} \ge \bar{E_{BLE}}  \]


Die durchschnittliche maximale Leistung der Quelle kann aus der Abbildung \ref{MPP_Werte} entnommen werden. Diese basiert auf dem Messprotokoll im Anhang \ref{anhang_messprotokoll_energie_harvester}. 

%MAN KÖNNTE. (GEHRÖT ZU OPTIONAL) 
Da die produzierter Energie von der Fahrgeschwindigkeit abhängt, wird das Energie-System in drei Zustände eingeteilt:

\begin{itemize}
    \item tiefe Geschwindigkeit: 0 - 10 km/h
    \item mittlere Geschwindigkeit: 10 - 20 km/h 
    \item hohe Geschwindigkeit: grösser als 20 km/h 
\end{itemize}

\begin{table}[ht]
\begin{tabular}{|l|l|}\hline \label{MPP_Werte} 
    Geschwindigkeit [km/h] & Maximale Leistung [$\mu W$] \\ \hline
    10 & 74.4 \\ \hline
    20 & unbekannt \\ \hline
    40 & unbekannt \\ \hline
\end{tabular}
\caption{Leistungsabgabe Harvester-Schaltung}
\end{table}

Der Energieverbrauch hängt von der Anzahl ausgelesener Daten ab. Wird nur die Geschwindigkeit übermittelt, ist der Verbrauch kleiner, als wenn zusätzlich die Temperatur und die Höhe mitgesendet werden.


\subsubsection{MPP einstellen}

%MPP:
%- start bei 50\thinspace\% (wir bei 40), und grobe Schritte (unten . direkt auf 60\thinspace\%, dann 67\thinspace\%). 
%
% 
%\begin{table}[ht]
%\begin{tabular}{|l|l|}\hline \label{Energie_Pakete_Werte} 
%    Anzahl Inhalte  & Energieverbrauch [$\mu J$] \\ \hline
%    1 & 11000 \\ \hline
%    2 & unbekannt \\ \hline
%    3 & unbekannt \\ \hline
%\end{tabular}
%\caption{Energieverbrauch BLE-Packete versenden}
%\end{table}
%
%(Für die Zuverlässigkeit der Datenübermittlung wird jeweils dasselbe Paket über drei Kanäle gesendet. Wenn hier \glqq 1 Inhalt versenden \grqq  steht, meint dies, ein Paket über drei Kanäle senden.)

\subsubsection*{Berechnung}

\[\bar{E_{HRV}} = \bar{P} * t \ge \bar{E_{BLE}}  \]
\[\bar{P_{10km/h}} * t = 11 * 10^{-3}  \]
\[74.4 * 10^{-6} * t = 11 * 10^{-3}   \]
\[t = 147 s  \]

\[\bar{E_{HRV}} = \bar{P} * t \ge \bar{E_{BLE}}  \]
\[\bar{P_{10km/h}} * t = 11 * 10^{-3}  \]
\[74.4 * 10^{-6} * t = 11 * 10^{-3}   \]
\[t = 147 s  \]

\subsubsection*{EM BOARD KONZEPT}
%Funktion generell beschreiben (im Anhang) 
\subsubsection*{Schwellwerte}
%Ausrechnend der schwellwerte
\subsubsection*{Konfigurationen}
%Konfigurationseinstellungen



% 4---------------------------------------------------------------------------
\section{Power Management}

%... noch zu schreiben ....
%Üblicherweise wird das RTOS-Betriebssystem von TI für Low Power Applikationen benutzt. 


%(Die Low-Power Programmbeispiele von TI basieren auf RTOS, ebenso die Dokumentation zu Low Power Applikationen, was zu viel Energie verbraucht (korrekt, wie belegen?). )


%Problem: So gehört zu jedem Aufwecken einer Peripherie, der Parallele Schlafmodus, bis dass die Peripherie gestartet ist. (Dies gilt auch für die Sensoren.) Zu lange warten: braucht Energie.
%
%Sleep konkret: Power Banks abschalten:\\
%Power Domains zeigen
%
%Schwierigkeit Interrupt and Events !!
%
%Bild: Energie-Langzeitmessung BLE versenden\\
%Beschriften mit aktiv und standby modus
%
%
%Gearbeitet wird mit einem Cortex M3 von TI.\\ 
%Grundsätzlich basieren die Bsp. auf RTOS. Wenige für PowerManagement. Das Powermanagement ohne Betriessystem. Wir verwenden dies, weil (gemäss Erfahrungswerte Praxis) mit Betriebsystem mehr Energie braucht).


\begin{figure}
  \includegraphics[width=1.0\textwidth]{../ressources/SimpleLink/V0Sendeablauf.png}
  \caption{Prozessablauf V0}
\end{figure}




% 5 ---------------------------------------------------------------------------
\section{Applikationsentwicklung}

Mit Android Version xx.

\subsection{Aufbau der App}

Welche Aktion zu welchem Display gehört (Überblick Gesamtsystem)


\subsection{Implementierte Aktionen}
Geräteauswahl
Kalibrierung
Geschwindigkeitsberechnung
Sensordaten ausgeben (was mit welcher Genauigkeit)

\subsection{BLE Empfangen}

Aufbau des Datenpakets: 
LEN, UUID, ...






